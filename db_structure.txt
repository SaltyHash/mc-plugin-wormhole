- - - - - - - - - - - - - - - - -  Pre-v1.4.0  - - - - - - - - - - - - - - - - -

CREATE TABLE IF NOT EXISTS jumps (
  player_name TEXT,
  jump_name   TEXT,
  world_name  TEXT,
  x REAL, y REAL, z REAL, yaw REAL,
  PRIMARY KEY (player_name, jump_name))

CREATE TABLE IF NOT EXISTS signs (
  world_name TEXT,
  x INTEGER, y INTEGER, z INTEGER,
  player_name TEXT,
  jump_name TEXT,
  PRIMARY KEY (world_name, x, y, z),
  FOREIGN KEY (player_name, jump_name)
    REFERENCES jumps (player_name, jump_name)
    ON DELETE CASCADE  ON UPDATE CASCADE)


- - - - - - - - - - - - - - - - -  Version 0   - - - - - - - - - - - - - - - - -

CREATE TABLE schema_version (
  `version` INTEGER);

CREATE TABLE players (
  `uuid`     CHAR(36) PRIMARY KEY,
  `username` VARCHAR(16);

CREATE TABLE jumps (
  `id`          INTEGER PRIMARY KEY,
  `player_uuid` CHAR(36) REFERENCES players(`uuid`)
                ON DELETE CASCADE ON UPDATE CASCADE,
  `name`        TEXT,
  `world_uuid`  CHAR(36),
  `x` REAL, `y` REAL, `z` REAL, `yaw` REAL,
  UNIQUE (`player_uuid`, `name`);

CREATE TABLE signs (
  `world_uuid` CHAR(36),
  `x` INTEGER, `y` INTEGER, `z` INTEGER,
  `jump_id` INTEGER REFERENCES jumps(`id`)
            ON DELETE CASCADE ON UPDATE CASCADE,
  PRIMARY KEY (`world_uuid`, `x`, `y`, `z`);